!function(e){e.fn.CustomDropDown=function(t){return this.each((function(){const n=e(this),o=n.attr("id");if(!o)return void console.error("Element does not have an ID.");const l=t.dependency||"",i=t.settings||{},s=t.depsettings||"";!function(t,n,o,l,i,s){const c=t[n],d=e(`#${n}`);if(!c||!d.length)return void console.error(`Dropdown data or container not found for ID '${n}'.`);d.empty();const a=Array.isArray(l)?l.join(" "):l,r=e("<select>",{id:`select-${n}`,name:`select-${n}`,class:a,"data-custom":s,multiple:"multi"===i.SelectFeature&&"multiple",style:"display:none;"});function p(e){if("multi"!==e.SelectFeature)return 40;{let t=0;if(e.Counting&&t++,e.SelectAll&&t++,e.ClearAll&&t++,e.DropDownIcon&&t++,4===t)return 100;if(3===t&&e.Counting)return 90;if(3===t&&!e.Counting)return 60;if(2===t&&e.Counting)return 70;if(2===t&&!e.Counting)return 40;if(1===t&&e.Counting)return 50;if(1===t&&!e.Counting)return 20;if(0===t)return 0}}r.on("change",(function(){!function(t){let n;const o=e(t).val(),l=e(t).attr("class"),i=l.split(/\s+/);l&&i.length&&i.forEach((t=>{let l=t.split("_"),i=l[l.length-1],s=l.slice(0,-1);n=Object.entries(dropdownDependency[t][i]);let c=n;s.forEach((t=>{let n=c.filter((([n,o])=>{if(o[t]&&Array.isArray(o[t])){const n=e(`#select-${t}`),l=e(n).val();if(l.length)return o[t].some((e=>l.includes(e)))}return!1}));0!=n.length&&n.length<=c.length&&(c=n)})),0===o.length&&0==c.length&&(c=Object.entries(dropdownDependency[t][i]),e(`#${i}`).trigger("updateSelectedItems",[[]])),0===o.length&&e(`#${i}`).trigger("updateSelectedItems",[[]]);const d={[i]:Object.fromEntries(c)},a=e(`#select-${i}`).attr("class").split(/\s+/),r=e(`#select-${i}`).attr("data-custom");e(`#${i}`).CustomDropDown({dropdownData:d,dependency:a,settings:dropdownDependency[r],depsettings:r})}))}(this)})),d.append(r);const u=p(i),g=e("<div>",{class:"custom-dropdown"}).append(`\n            <div class="selected-values">\n                <div class="selected-items" style="max-width: calc(100% - ${u}px);"><span id="select-text">Select ${n}</span></div>\n                ${i.Counting||i.SelectAll||i.ClearAll||i.DropDownIcon?'<div class="divider"></div>':""}\n                <div class="dropdown-buttons">\n                ${i.Counting&&"multi"===i.SelectFeature?`<div id="selected-count-${n}" class="selected-count" ${i.FontSize?`style="font-size: ${i.FontSize}px"`:""}>0</div>`:""}\n                ${i.SelectAll&&"multi"===i.SelectFeature?`<img class="select-all" id="select-all-${n}" src="${i.SelectAllImg}" alt="" ${i.IconSize?`style="width: ${i.IconSize}px"`:""}>`:""}\n                ${i.SelectAll&&i.DeselectAll&&"multi"===i.SelectFeature?`<img class="deselect-all" id="deselect-all-${n}" src="${i.DeselectAllImg}" alt="" ${i.IconSize?`style="width: ${i.IconSize}px"`:""}>`:""}\n                ${i.ClearAll?`<img class="clear-all" id="clear-all-${n}" src="${i.ClearAllImg}" alt="" ${i.IconSize?`style="width: ${i.IconSize}px"`:""}>`:""}\n                ${i.DropDownIcon?`<img class="drop-down-all" id="drop-down-all-${n}" src="${i.DropDownIconImg}" alt="" ${i.IconSize?`style="width: ${i.IconSize}px"`:""}>`:""}\n                </div>\n            </div>\n            <div class="dropdown-content hidden">\n            ${i.Searchable?`<input type="text" placeholder="Search..." id="dropdown-search-${n}" ${i.FontSize?`style="font-size: ${i.FontSize}px"`:""}>`:""}\n                <div class="dropdown-list"></div>\n            </div>\n        `);i.DropDownSize&&g.css("width",`${i.DropDownSize}px`);d.append(g),function(t,n,o,l,i,s){const c=t.find(".dropdown-content"),d=t.find(".selected-values"),a=e(`#select-all-${o}`),r=e(`#deselect-all-${o}`),p=e(`#clear-all-${o}`),u=t.find(".selected-items"),g=e(`#selected-count-${o}`),f=t.find(".dropdown-list"),h=e(`#dropdown-search-${o}`),$=t.find("#select-text");let m=[];if(null==s.SelectFeature||"single"===s.SelectFeature){const t=e("<option>",{value:"",text:"single"});l.append(t)}for(const[t,o]of Object.entries(n)){const n=o.name||t,s=e("<option>",{value:t,text:n});l.append(s),i.includes(t)&&(m.push(t),s.prop("selected",!0))}function S(t=""){f.empty();const o=Object.entries(n).filter((([e,n])=>n.name.toLowerCase().includes(t.toLowerCase()))),l=e(document.createDocumentFragment()),i=e(document.createDocumentFragment());0===o.length?f.append(`<div style="padding: 5px; color: #888; ${s.FontSize?`font-size: ${s.FontSize}px`:""}">No data found</div>`):(o.forEach((([t,n])=>{const o=n.name,c=e("<div>").text(o).attr("title",o).addClass(m.includes(t)?"selected":"unselected");s.FontSize&&c.css("font-size",`${s.FontSize}px`),c.on("click",(e=>{e.stopPropagation(),v(t,o)})),m.includes(t)?l.append(c):i.append(c)})),f.append(l),f.append(i))}function v(e,t){if(null==s.SelectFeature||"single"===s.SelectFeature)m=[e],l.find("option").prop("selected",!1),l.find(`option[value="${e}"]`).prop("selected",!0);else{const t=m.indexOf(e);t>-1?(m.splice(t,1),l.find(`option[value="${e}"]`).prop("selected",!1)):(m.push(e),l.find(`option[value="${e}"]`).prop("selected",!0))}z(),S(h.val()),w(),l.trigger("change")}function w(){m.length===Object.keys(n).length?(a.hide(),r.show()):(a.show(),r.hide())}function z(){u.empty(),g.text(m.length),0===m.length?($.text(`Select ${o}`),s.FontSize&&$.css("font-size",`${s.FontSize}px`),u.append($)):m.forEach((t=>{const o=n[t].name,l=e("<span>").text(o),i=e("<span>",{text:"Ã—",class:"remove-icon"});s.FontSize&&(l.css("font-size",`${s.FontSize}px`),i.css("font-size",`${s.FontSize}px`)),i.on("click",(e=>{e.stopPropagation(),D(t)})),l.append(i),u.append(l)})),t.trigger("updateSelectedItems",[m]),w()}function D(e){m=m.filter((t=>t!==e)),l.find(`option[value="${e}"]`).prop("selected",!1),z(),S(h.val()),l.trigger("change")}z(),w(),d.on("click",(n=>{var o;n.stopPropagation(),o=t,e(".custom-dropdown .dropdown-content").each((function(){e(this).closest(".custom-dropdown").is(o)||e(this).addClass("hidden")})),c.toggleClass("hidden"),c.hasClass("hidden")||h.focus()})),c.on("click",(e=>{e.stopPropagation()})),e(document).on("click",(e=>{t.is(e.target)||0!==t.has(e.target).length||c.addClass("hidden")})),a.on("click",(()=>{m=Object.keys(n),l.find("option").prop("selected",!0),z(),S(),l.trigger("change")})),r.on("click",(()=>{m=[],l.find("option").prop("selected",!1),z(),S(),l.trigger("change")})),p.on("click",(()=>{m=[],l.find("option").prop("selected",!1),z(),S(),l.trigger("change")})),h.on("input",(()=>{S(h.val())})),S(),w()}(g,c,n,r,o,i)}(t.dropdownData||{},o,n.data("selectedItems")||[],l,i,s),n.on("updateSelectedItems",(function(e,t){n.data("selectedItems",t)}))}))}}(jQuery);
