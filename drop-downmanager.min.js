!function(e){function t(t){let n;const l=e(t).val(),o=e(t).attr("class"),i=o.split(/\s+/);o&&i.length&&i.forEach((t=>{let o=t.split("_"),i=o[o.length-1],s=o.slice(0,-1);n=JSON.parse(JSON.stringify(dropdownDependency[t][i]));let c=n;s.forEach((t=>{const n=e(`#select-${t}`);let l=e(n).val();if(Array.isArray(l)||(l=[l]),l.length&&l[0].length)for(const e in c)l.some((n=>c[e][t].includes(n)))||delete c[e]})),0===l.length&&0===c.length&&(c=dropdownDependency[t][i],e(`#${i}`).trigger("updateSelectedItems",[[]])),0===l.length&&e(`#${i}`).trigger("updateSelectedItems",[[]]);const d={[i]:c},a=e(`#select-${i}`).attr("class").split(/\s+/),r=e(`#select-${i}`).attr("data-custom"),p=e(`#select-${i}`).attr("data-role");e(`#${i}`).CustomDropDown({dropdownData:d,displayName:p,dependency:a,settings:dropdownDependency[r],depsettings:r})}))}e.fn.CustomDropDown=function(n){return this.each((function(){const l=e(this),o=l.attr("id");if(!o)return void console.error("Element does not have an ID.");const i=n.dependency||"",s=n.displayName||"Select Option",c=n.settings||{},d=n.depsettings||"",a=n.dropdownData||{};l.data("selectedItems",n.selectedItem);const r=l.data("selectedItems")||[];!function(n,l,o,i,s,c,d){const a=n[l],r=e(`#${l}`);if(!a||!r.length)return void console.error(`Dropdown data or container not found for ID '${l}'.`);r.empty();const p=Array.isArray(i)?i.join(" "):i,u=e("<select>",{id:`select-${l}`,name:`select-${l}`,class:p,"data-custom":c,"data-role":d,multiple:"multi"===s.SelectFeature&&"multiple",style:"display:none;"});function g(e){if("multi"!==e.SelectFeature)return 40;{let t=0;if(1==e.Counting&&t++,1==e.SelectAll&&t++,1==e.ClearAll&&t++,1==e.DropDownIcon&&t++,4===t)return 100;if(3===t&&1==e.Counting)return 90;if(3===t&&0==e.Counting)return 60;if(2===t&&1==e.Counting)return 70;if(2===t&&0==e.Counting)return 40;if(1===t&&1==e.Counting)return 50;if(1===t&&0==e.Counting)return 20;if(0===t)return 0}}u.on("change",(function(){t(this)})),r.append(u);const f=g(s);let h;h=60===f?63:100===f?109:90===f?93:70===f?73:40===f?43:50===f?55:20===f?25:0;const m=e("<div>",{class:"custom-dropdown"}).append(`\n            <div class="selected-values">\n                ${1==s.Searchable&&Object.keys(a).length?`<input type="text" placeholder="Search..." class="search-filter hidden" style="max-width: calc(100% - ${f}px); flex: 1; ${s.FontSize?`font-size: ${s.FontSize}px;`:""}" id="dropdown-search-${l}">`:""}\n                <div class="selected-items" style="max-width: calc(100% - ${f}px);"><span id="select-text">${d}</span></div>\n                ${1==s.Counting||1==s.SelectAll||1==s.ClearAll||1==s.DropDownIcon?'<div class="divider"></div>':""}\n                <div class="dropdown-buttons">\n                ${1==s.Counting&&"multi"===s.SelectFeature?`<div id="selected-count-${l}" class="selected-count" ${s.FontSize?`style="font-size: ${s.FontSize}px"`:""}>0</div>`:""}\n                ${1==s.SelectAll&&"multi"===s.SelectFeature?`<img class="select-all" id="select-all-${l}" src="${s.SelectAllImg?s.SelectAllImg:""}" alt="" ${s.IconSize?`style="width: ${s.IconSize}px"`:""}>`:""}\n                ${1==s.SelectAll&&1==s.DeselectAll&&"multi"===s.SelectFeature?`<img class="deselect-all" id="deselect-all-${l}" src="${s.DeselectAllImg?s.DeselectAllImg:""}" alt="" ${s.IconSize?`style="width: ${s.IconSize}px"`:""}>`:""}\n                ${1==s.ClearAll?`<img class="clear-all" id="clear-all-${l}" src="${s.ClearAllImg?s.ClearAllImg:""}" alt="" ${s.IconSize?`style="width: ${s.IconSize}px"`:""}>`:""}\n                ${1==s.DropDownIcon?`<img class="drop-down-all" id="drop-down-all-${l}" src="${s.DropDownIconImg?s.DropDownIconImg:""}" alt="" ${s.IconSize?`style="width: ${s.IconSize}px"`:""}>`:""}\n                </div>\n            </div>\n            <div class="dropdown-content hidden">\n                <div class="dropdown-list"></div>\n            </div>\n        `);s.DropDownSize&&m.css("width",`${s.DropDownSize}px`);r.append(m),function(t,n,l,o,i,s,c){const d=t.find(".dropdown-content"),a=t.find(".selected-values"),r=e(`#select-all-${l}`),p=e(`#deselect-all-${l}`),u=e(`#clear-all-${l}`),g=t.find(".selected-items"),f=e(`#selected-count-${l}`),h=t.find(".dropdown-list"),m=e(`#dropdown-search-${l}`),$=t.find("#select-text");let S=[];if(null==s.SelectFeature||"single"===s.SelectFeature){const t=e("<option>",{value:"",text:"single"});o.append(t)}for(const[t,l]of Object.entries(n)){const n=l.name||t,s=e("<option>",{value:t,text:n});o.append(s),i.includes(t)&&(S.push(t),s.prop("selected",!0))}D(),y(),a.on("click",(l=>{var o;l.stopPropagation(),o=t,e(".custom-dropdown").each((function(){if(!e(this).is(o)){e(this).find(".dropdown-content").addClass("hidden");const t=e(this).find(".search-filter");t.addClass("hidden"),t.val(""),t.trigger("input"),e(this).find(".selected-items").removeClass("hidden")}})),d.toggleClass("hidden"),Object.keys(n).length&&(g.toggleClass("hidden"),m.toggleClass("hidden"),d.hasClass("hidden")?(m.val(""),m.trigger("input")):m.focus())})),"multi"===s.SelectFeature&&d.on("click",(e=>{e.stopPropagation()}));function v(t=""){h.empty();const l=Object.entries(n).filter((([e,n])=>n.name.toLowerCase().includes(t.toLowerCase()))),o=e(document.createDocumentFragment()),i=e(document.createDocumentFragment());0===l.length?h.append(`<div style="padding: 5px; color: #888; ${s.FontSize?`font-size: ${s.FontSize}px`:""}">No data found</div>`):(l.forEach((([t,n])=>{const l=n.name,c=e("<div>").text(l).attr("title",l).addClass(S.includes(t)?"selected":"unselected");s.FontSize&&c.css("font-size",`${s.FontSize}px`),c.on("click",(e=>{"multi"===s.SelectFeature&&e.stopPropagation(),w(t,l)})),S.includes(t)?o.append(c):i.append(c)})),h.append(o),h.append(i))}function w(e,t){if(null==s.SelectFeature||"single"===s.SelectFeature)S=[e],o.find("option").prop("selected",!1),o.find(`option[value="${e}"]`).prop("selected",!0);else{const t=S.indexOf(e);t>-1?(S.splice(t,1),o.find(`option[value="${e}"]`).prop("selected",!1)):(S.push(e),o.find(`option[value="${e}"]`).prop("selected",!0))}D(),v(m.val()),y(),o.trigger("change")}function y(){S.length===Object.keys(n).length?(r.hide(),p.show()):(r.show(),p.hide())}function D(){g.empty(),f.text(S.length).attr("title",S.length),0===S.length?($.text(`${c}`),s.FontSize&&$.css("font-size",`${s.FontSize}px`),g.append($)):S.forEach((t=>{const l=n[t].name,o=e("<span>").text(l),i=e("<span>",{text:"Ã—",class:"remove-icon"});s.FontSize&&(o.css("font-size",`${s.FontSize}px`),i.css("font-size",`${s.FontSize}px`)),i.on("click",(e=>{e.stopPropagation(),I(t)})),o.append(i),g.append(o)})),t.trigger("updateSelectedItems",[S]),y()}function I(e){S=S.filter((t=>t!==e)),o.find(`option[value="${e}"]`).prop("selected",!1),D(),v(m.val()),o.trigger("change")}m.on("click",(e=>{e.stopPropagation()})),e(document).on("click",(e=>{t.is(e.target)||0!==t.has(e.target).length||(d.addClass("hidden"),Object.keys(n).length&&(m.addClass("hidden"),m.val(""),m.trigger("input"),g.removeClass("hidden")))})),r.on("click",(()=>{S=Object.keys(n),o.find("option").prop("selected",!0),D(),v(),o.trigger("change")})),p.on("click",(()=>{S=[],o.find("option").prop("selected",!1),D(),v(),o.trigger("change")})),u.on("click",(()=>{S=[],o.find("option").prop("selected",!1),D(),v(),o.trigger("change")})),m.on("input",(()=>{v(m.val())})),v(),y()}(m,a,l,u,o,s,d)}(a,o,r,i,c,d,s),setTimeout((()=>{t(e(`#select-${o}`))}),100),l.on("updateSelectedItems",(function(e,t){l.data("selectedItems",t)}))}))}}(jQuery);
